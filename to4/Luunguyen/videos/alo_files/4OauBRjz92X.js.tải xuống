;/*FB_PKG_DELIM*/

__d("E2EEBackupSecretRestoreModule",["E2EEBackupCommon","QuickPerformanceLogger","Random","VestaClient","VestaClientError","VestaClientV2","gkx","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("qpl")._(235874858,"168");function u(){return o("Random").uint32()}async function c(t,n,a){var i=u();(e||(e=r("QuickPerformanceLogger"))).markerStart(s,i),e.markerAnnotate(s,{string:{product_use_case:n.productUseCase}},{instanceKey:i});try{var l=r("gkx")("13570");(e||(e=r("QuickPerformanceLogger"))).markerAnnotate(s,{bool:{is_wasm_vesta_client_v2:l}},{instanceKey:i});var c=await t.initLogin({clientId:n.clientId,productUseCase:n.productUseCase},a),d=c.islandRsaPub,m=c.islandRsaPubSig,p=c.islandEd25519Pub,_=c.islandEd25519PubSig,f=c.isRegistered;if(e.markerPoint(s,"init_login_network_end",{instanceKey:i}),!f)throw(e||(e=r("QuickPerformanceLogger"))).markerAnnotate(s,{string:{failure_reason:"NOT_REGISTERED"}},{instanceKey:i}),e.markerEnd(s,3,i),new(o("E2EEBackupCommon")).BackupError(o("E2EEBackupCommon").BackupErrorType.NOT_REGISTERED);var g,h;if(l){var y=await Promise.all([o("VestaClientV2").validateHsmKey(d,m),o("VestaClientV2").validateHsmKey(p,_)]);if(g=y[0],h=y[1],!g.success)throw g.error;if(!h.success)throw h.error;g=g.value,h=h.value}else{var C=await Promise.all([o("VestaClient").validateHsmKey(d,m),o("VestaClient").validateHsmKey(p,_)]);g=C[0],h=C[1]}if(!g)throw(e||(e=r("QuickPerformanceLogger"))).markerAnnotate(s,{string:{failure_reason:"ISLAND_PUB_RSA_KEY_INVALID"}},{instanceKey:i}),e.markerEnd(s,3,i),new(o("E2EEBackupCommon")).BackupError(o("E2EEBackupCommon").BackupErrorType.ISLAND_PUB_RSA_KEY_INVALID);if(!h)throw(e||(e=r("QuickPerformanceLogger"))).markerAnnotate(s,{string:{failure_reason:"ISLAND_PUB_ED25519_KEY_INVALID"}},{instanceKey:i}),e.markerEnd(s,3,i),new(o("E2EEBackupCommon")).BackupError(o("E2EEBackupCommon").BackupErrorType.ISLAND_PUB_ED25519_KEY_INVALID);e.markerPoint(s,"validate_hsm_keys_client_end",{instanceKey:i});var b=n.vestaAccountPin;if(b==null)throw new(o("E2EEBackupCommon")).BackupError(o("E2EEBackupCommon").BackupErrorType.MISSING_PIN_INPUT);var v=new TextEncoder,S;if(l){if(S=await o("VestaClientV2").beginLogin(v.encode(b)),!S.success)throw S.error;S=S.value}else S=await o("VestaClient").beginLogin(v.encode(b));var R=S,L=R.clientState,E=R.l1Message;(e||(e=r("QuickPerformanceLogger"))).markerPoint(s,"begin_login_client_end",{instanceKey:i});var k=await t.beginLogin({clientId:n.clientId,productUseCase:n.productUseCase,opaqueL1:E},a),I=k.opaqueL2,T=k.opaqueL2Sig;e.markerPoint(s,"begin_login_network_end",{instanceKey:i});var D;if(l){if(D=await o("VestaClientV2").finishLogin(I,T,p,L),!D.success)throw D.error;D=D.value}else D=await o("VestaClient").finishLogin(I,T,p,L);var x=D,$=x.exportKey,P=x.l3Message,N=x.sessionKey;e.markerPoint(s,"finish_login_client_end",{instanceKey:i});var M=await t.finishLogin({clientId:n.clientId,productUseCase:n.productUseCase,opaqueL3:P},a),w=M.loginSuccess,A=M.loginPayload;if(e.markerPoint(s,"finish_login_network_end",{instanceKey:i}),!w)throw(e||(e=r("QuickPerformanceLogger"))).markerAnnotate(s,{string:{failure_reason:"VESTA_SERVER_ERROR"}},{instanceKey:i}),e.markerEnd(s,3,i),new(o("E2EEBackupCommon")).BackupError(o("E2EEBackupCommon").BackupErrorType.VESTA_SERVER_ERROR);if(A!=null){var F;if(l){if(F=await o("VestaClientV2").unpackLoginPayload(A,N,$),!F.success)throw F.error;F=F.value}else F=await o("VestaClient").unpackLoginPayload(A,N,$);var O=F,B=O.userSecret;return(e||(e=r("QuickPerformanceLogger"))).markerPoint(s,"unpack_login_payload",{instanceKey:i}),e.markerEnd(s,2,i),B}throw e.markerAnnotate(s,{string:{failure_reason:"VESTA_SERVER_ERROR"}},{instanceKey:i}),e.markerEnd(s,3,i),new(o("E2EEBackupCommon")).BackupError(o("E2EEBackupCommon").BackupErrorType.VESTA_SERVER_ERROR)}catch(t){throw t instanceof o("E2EEBackupCommon").BackupError?t:t instanceof r("VestaClientError")?((e||(e=r("QuickPerformanceLogger"))).markerAnnotate(s,{string:{failure_reason:"VestaClientException: "+t.name}},{instanceKey:i}),e.markerEnd(s,3,i),t.name==="InvalidUserPassword"?new(o("E2EEBackupCommon")).BackupError(o("E2EEBackupCommon").BackupErrorType.INVALID_PASSWORD,t):new(o("E2EEBackupCommon")).BackupError(o("E2EEBackupCommon").BackupErrorType.VESTA_CLIENT_ERROR,t)):((e||(e=r("QuickPerformanceLogger"))).markerAnnotate(s,{string:{failure_reason:t.message}},{instanceKey:i}),e.markerEnd(s,3,i),new(o("E2EEBackupCommon")).BackupError(o("E2EEBackupCommon").BackupErrorType.NETWORK_PROVIDER_ERROR,t))}}l.restoreBackupSecret=c}),98);
__d("MAWEncryptedBackupsClearRecoveryCode",["Promise","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){return(e||(e=n("Promise"))).all([o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.secure_recovery_code_data)),o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.secure_encrypted_backups_recovery_code_status))]).then(function(r){var o=r[0],a=r[1];if(o!=null||a!=null)return t.runInTransaction(function(t){return(e||(e=n("Promise"))).all([(o==null?void 0:o.taskId)!=null?t.secure_recovery_code_data.delete(o.taskId):(e||(e=n("Promise"))).resolve(),(a==null?void 0:a.pk)!=null?t.secure_encrypted_backups_recovery_code_status.delete(a.pk):(e||(e=n("Promise"))).resolve()])},"readwrite",void 0,void 0,i.id+":27")})}l.encryptedBackupsClearRecoveryCode=s}),98);
__d("MWChatEBPinCodeVerifyIndicator.react",["fbt","MWXRow.react","MWXRowItem.react","MWXSpinner.react","MWXText.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(5),n=e.isMessenger,a=n?"disabled_DEPRECATED":"blue",i;t[0]!==a?(i=u.jsx(r("MWXRowItem.react"),{verticalAlign:"center",children:u.jsx(r("MWXSpinner.react"),{color:a,size:12})}),t[0]=a,t[1]=i):i=t[1];var l;t[2]===Symbol.for("react.memo_cache_sentinel")?(l=u.jsx(r("MWXRowItem.react"),{verticalAlign:"center",children:u.jsx(r("MWXText.react"),{color:"secondary",testid:void 0,type:"meta3",children:s._(/*BTDS*/"\u0110ang x\u00e1c minh m\u00e3 PIN")})}),t[2]=l):l=t[2];var c;return t[3]!==i?(c=u.jsxs(r("MWXRow.react"),{align:"center",paddingTop:8,spacing:8,children:[i,l]}),t[3]=i,t[4]=c):c=t[4],c}l.default=c}),226);
__d("MWChatEncryptedBackupsForgotPINDialogQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="24783313654667152"}),null);
__d("MWChatEncryptedBackupsForgotPINDialogQuery$Parameters",["MWChatEncryptedBackupsForgotPINDialogQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("MWChatEncryptedBackupsForgotPINDialogQuery_facebookRelayOperation"),metadata:{},name:"MWChatEncryptedBackupsForgotPINDialogQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("MWChatEncryptedBackupsForgotPINDialog.entrypoint",["JSResourceForInteraction","MWChatEncryptedBackupsForgotPINDialogQuery$Parameters"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(){return{queries:{queryReference:{parameters:r("MWChatEncryptedBackupsForgotPINDialogQuery$Parameters"),variables:{}}}}},root:r("JSResourceForInteraction")("MWChatEncryptedBackupsForgotPINDialog.react").__setRef("MWChatEncryptedBackupsForgotPINDialog.entrypoint")};l.default=e}),98);
__d("MWChatEncryptedBackupsForgotPinStepDialogPage.entrypoint",["JSResourceForInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(){return{queries:{}}},root:r("JSResourceForInteraction")("MWChatEncryptedBackupsForgotPinStepDialogPage.react").__setRef("MWChatEncryptedBackupsForgotPinStepDialogPage.entrypoint")};l.default=e}),98);
__d("UserMobileEBState",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["UNKNOWN","NO_MOBILE","UNTRUSTED_MOBILE","TRUSTED_MOBILE"]);i.UserMobileEBState=e}),66);
__d("useWAInfraMobileDeviceList",["cr:8431","react","react-compiler-runtime","useWAInfraDeviceList"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useMemo;function u(){var e=o("react-compiler-runtime").c(3),t=r("useWAInfraDeviceList")(),a;e[0]!==t?(a=t.filter(c),e[0]=t,e[1]=a):a=e[1];var i=a;if(n("cr:8431")){var l;return e[2]===Symbol.for("react.memo_cache_sentinel")?(l=[n("cr:8431")],e[2]=l):l=e[2],l}return i}function c(e){var t;return e.platform==="Messenger"&&!["Mac OS X","Windows"].includes(e.manufacturer)&&!["Chrome","Safari","Firefox","Edge","System Product Name"].includes(e.model)&&!(e.manufacturer==="Apple"&&(t=e.model)!=null&&t.includes("Mac"))}l.default=u}),98);
__d("useGetUserMobileEBState",["MAWOneTimeCodeGating","UserMobileEBState","gkx","react-compiler-runtime","useHasOTCEligibleDevicesFromReStore","useWAInfraMobileDeviceList"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=o("react-compiler-runtime").c(7),t=r("useWAInfraMobileDeviceList")(),n=r("useHasOTCEligibleDevicesFromReStore")(),a=n.hasOtcEligibleDevices;if(a){var i;return e[0]===Symbol.for("react.memo_cache_sentinel")?(i={state:o("UserMobileEBState").UserMobileEBState.TRUSTED_MOBILE},e[0]=i):i=e[0],i}var l=o("MAWOneTimeCodeGating").isOneTimeCodeEnabled()&&a,u=t.length===0&&r("gkx")("14456");if(u){var c;return e[1]===Symbol.for("react.memo_cache_sentinel")?(c={state:o("UserMobileEBState").UserMobileEBState.NO_MOBILE},e[1]=c):c=e[1],c}var d=t.length>0&&!l,m=d&&r("gkx")("14456");if(m){var p;e[2]!==t?(p=t.map(s),e[2]=t,e[3]=p):p=e[3];var _;return e[4]!==p?(_={deviceInfoList:p,state:o("UserMobileEBState").UserMobileEBState.UNTRUSTED_MOBILE},e[4]=p,e[5]=_):_=e[5],_}var f;return e[6]===Symbol.for("react.memo_cache_sentinel")?(f={state:o("UserMobileEBState").UserMobileEBState.UNKNOWN},e[6]=f):f=e[6],f}function s(e){return{lastSeen:e.lastSeen,model:e.model,platform:e.platform}}l.default=e}),98);
__d("MWEncryptedBackupsForgotPinStep",["fbt","MAWEncryptedBackupsRestoreDialog.entrypoint","MWChatEncryptedBackupsForgotPINDialog.entrypoint","MWChatEncryptedBackupsForgotPinStepDialogPage.entrypoint","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsQPLSource.enum","MWEBVirtualDevicesContext.react","MWJewelPopoverDialogContext.react","QPLUserFlow","UserMobileEBState","cr:12326","cr:12327","emptyFunction","gkx","react","react-compiler-runtime","useGetUserMobileEBState","useMWXEntryPointDialog","usePushPage"],(function(t,n,r,o,a,i,l,s){"use strict";var e=["onHighIntent"],u=["onHighIntent"],c=["onHighIntent"],d,m=d||(d=o("react")),p=d.useContext,_=s._(/*BTDS*/"Qu\u00ean m\u00e3 PIN?"),f=s._(/*BTDS*/"B\u1ea1n c\u1ea7n tr\u1ee3 gi\u00fap?"),g="https://www.facebook.com/help/messenger-app/431055522328649?ref=learn_more",h=r("gkx")("14456"),y=function(t){r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,t===_?"PIN_CODE_RESTORE_FORGOT_PIN_CLICK":"PIN_CODE_RESTORE_NEED_HELP_CLICK")},C=h?_:f,b=function(){y(C)},v={children:C,href:g,onClick:b,rel:"noreferrer",target:"_blank"};function S(t){var a=o("react-compiler-runtime").c(39),i=t.offlineDevicesCount,l=t.onClose,s=t.onComplete,d=t.pushPage,m=r("useGetUserMobileEBState")(),p;a[0]===Symbol.for("react.memo_cache_sentinel")?(p={},a[0]=p):p=a[0];var g=r("usePushPage")(n("cr:12326"),p),h=g[0],C=g[1],b;if(a[1]!==C){var S=C.onHighIntent,R=babelHelpers.objectWithoutPropertiesLoose(C,e);b=R,a[1]=C,a[2]=b}else b=a[2];var L;a[3]===Symbol.for("react.memo_cache_sentinel")?(L={},a[3]=L):L=a[3];var E=r("usePushPage")(n("cr:12327"),L),k=E[0],I=E[1],T;if(a[4]!==I){var D=I.onHighIntent,x=babelHelpers.objectWithoutPropertiesLoose(I,u);T=x,a[4]=I,a[5]=T}else T=a[5];var $;a[6]===Symbol.for("react.memo_cache_sentinel")?($={},a[6]=$):$=a[6];var P=r("usePushPage")(r("MWChatEncryptedBackupsForgotPinStepDialogPage.entrypoint"),$),N=P[0],M=P[1],w;if(a[7]!==M){var A=M.onHighIntent,F=babelHelpers.objectWithoutPropertiesLoose(M,c);w=F,a[7]=M,a[8]=w}else w=a[8];if(m.state===o("UserMobileEBState").UserMobileEBState.UNTRUSTED_MOBILE){var O;a[9]!==l||a[10]!==s||a[11]!==d||a[12]!==k?(O=function(){y(_),k({onClose:l,onComplete:s,pushPage:d})},a[9]=l,a[10]=s,a[11]=d,a[12]=k,a[13]=O):O=a[13];var B;return a[14]!==O||a[15]!==T.onHoverIn||a[16]!==T.onHoverOut||a[17]!==T.onPressIn?(B={children:_,onClick:O,onHoverEnd:T.onHoverOut,onHoverStart:T.onHoverIn,onPressStart:T.onPressIn},a[14]=O,a[15]=T.onHoverIn,a[16]=T.onHoverOut,a[17]=T.onPressIn,a[18]=B):B=a[18],B}if(m.state===o("UserMobileEBState").UserMobileEBState.NO_MOBILE){var W;a[19]!==l||a[20]!==s||a[21]!==h?(W=function(){y(_),h({onClose:l,onComplete:s})},a[19]=l,a[20]=s,a[21]=h,a[22]=W):W=a[22];var q;return a[23]!==b.onHoverIn||a[24]!==b.onHoverOut||a[25]!==b.onPressIn||a[26]!==W?(q={children:_,onClick:W,onHoverEnd:b.onHoverOut,onHoverStart:b.onHoverIn,onPressStart:b.onPressIn},a[23]=b.onHoverIn,a[24]=b.onHoverOut,a[25]=b.onPressIn,a[26]=W,a[27]=q):q=a[27],q}var U=i>0||!0;if(U){var V;a[28]!==U||a[29]!==l||a[30]!==s||a[31]!==N||a[32]!==d?(V=function(){y(f),N({isRCDeviceEnabled:U,onClose:l,onComplete:s,pushPage:d},{})},a[28]=U,a[29]=l,a[30]=s,a[31]=N,a[32]=d,a[33]=V):V=a[33];var H;return a[34]!==w.onHoverIn||a[35]!==w.onHoverOut||a[36]!==w.onPressIn||a[37]!==V?(H={children:f,onClick:V,onHoverEnd:w.onHoverOut,onHoverStart:w.onHoverIn,onPressStart:w.onPressIn},a[34]=w.onHoverIn,a[35]=w.onHoverOut,a[36]=w.onPressIn,a[37]=V,a[38]=H):H=a[38],H}else return v}function R(e){var t=o("react-compiler-runtime").c(18),n=e.onDismiss,a=n===void 0?r("emptyFunction"):n,i=r("useGetUserMobileEBState")(),l;t[0]===Symbol.for("react.memo_cache_sentinel")?(l={},t[0]=l):l=t[0];var s=r("useMWXEntryPointDialog")(r("MAWEncryptedBackupsRestoreDialog.entrypoint"),l),u=s[0],c=o("MWEBVirtualDevicesContext.react").useMWEBVirtualDevices(),d=c.virtualDeviceInfo,m=d.offlineDevicesCount,g=p(r("MWJewelPopoverDialogContext.react")),h=g.setIsOpenForDialog,C;t[1]===Symbol.for("react.memo_cache_sentinel")?(C={},t[1]=C):C=t[1];var b=r("useMWXEntryPointDialog")(r("MWChatEncryptedBackupsForgotPINDialog.entrypoint"),C),S,R;if(t[2]!==b?(R=b[0],S=babelHelpers.arrayLikeToArray(b).slice(1),t[2]=b,t[3]=S,t[4]=R):(S=t[3],R=t[4]),i.state===o("UserMobileEBState").UserMobileEBState.UNTRUSTED_MOBILE||i.state===o("UserMobileEBState").UserMobileEBState.NO_MOBILE){var L;return t[5]!==h||t[6]!==u||t[7]!==i.state?(L={children:_,onClick:function(){y(_),h(!0),u({onDismissUpsell:r("emptyFunction"),skipToEOTRForgotPINStep:i.state,source:r("MWChatEncryptedBackupsQPLSource.enum").JEWEL_THREADLIST_QP})}},t[5]=h,t[6]=u,t[7]=i.state,t[8]=L):L=t[8],L}var E=m>0;if(E){var k=S,I=k[0],T=k[1],D=k[2],x;t[9]!==a||t[10]!==h||t[11]!==R?(x=function(){y(f),h(!0),R({onDismiss:a})},t[9]=a,t[10]=h,t[11]=R,t[12]=x):x=t[12];var $;return t[13]!==T||t[14]!==I||t[15]!==D||t[16]!==x?($={children:f,onClick:x,onHoverEnd:T,onHoverStart:I,onPressStart:D},t[13]=T,t[14]=I,t[15]=D,t[16]=x,t[17]=$):$=t[17],$}else return v}l.STATIC_HELP_CENTER_LINK_PROPS=v,l.useForgotPinLinkPushPageProps=S,l.useForgotPinLinkShowDialogProps=R}),226);
__d("MWChatEncryptedBackupsRestoreJewelForgotPinButtonSuspender.react",["MWEncryptedBackupsForgotPinStep","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["children","href","onClick","onHoverEnd","onHoverStart","onPressStart","rel","target"],s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(5),r=t.children,a=t.dismissSoftblock,i;n[0]!==a?(i={onDismiss:a},n[0]=a,n[1]=i):i=n[1];var l=o("MWEncryptedBackupsForgotPinStep").useForgotPinLinkShowDialogProps(i),s;if(n[2]!==r||n[3]!==l){var u=l.children,c=l.href,d=l.onClick,m=l.onHoverEnd,p=l.onHoverStart,_=l.onPressStart,f=l.rel,g=l.target,h=babelHelpers.objectWithoutPropertiesLoose(l,e),y=babelHelpers.extends({},h,{label:u,linkProps:c!=null?{rel:f,target:g,url:c}:void 0,onHoverIn:p,onHoverOut:m,onPress:d,onPressIn:_});s=r({buttonProps:y,linkProps:l}),n[2]=r,n[3]=l,n[4]=s}else s=n[4];return s}l.default=c}),98);
__d("MWChatEncryptedBackupsSetIsDialogPersistedContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext({setIsDialogPersisted:function(){}});l.default=u}),98);
__d("MWChatEncryptedBackupsSettingsDialogQuery.graphql",["MWChatEncryptedBackupsSettingsDialogQuery_facebookRelayOperation","relay-runtime"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:!1,kind:"LocalArgument",name:"labyrinthOnePointOneSecurityUX"}],t={alias:null,args:null,kind:"ScalarField",name:"has_seen_eb_auto_restore_notice",storageKey:null},r={alias:null,args:[{kind:"Literal",name:"family_device_id",value:""}],kind:"ScalarField",name:"has_otc_eligible_devices",storageKey:'has_otc_eligible_devices(family_device_id:"")'},o={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"MWChatEncryptedBackupsSettingsDialogQuery",selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"MWEBVestaUserInfoContextProvider_viewer"},{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"encrypted_backup",plural:!1,selections:[t],storageKey:null}],storageKey:null},action:"THROW",path:"viewer"},{args:[{kind:"Variable",name:"labyrinthOnePointOneSecurityUX",variableName:"labyrinthOnePointOneSecurityUX"}],kind:"FragmentSpread",name:"MWChatEncryptedBackupsSettingsDialogStep_query"},{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"xfb_backup",plural:!1,selections:[r,{args:null,kind:"FragmentSpread",name:"useMWEncryptedBackupsGetVirtualDevicesPreloaded_xfbEncryptedBackup"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"MWChatEncryptedBackupsSettingsDialogQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerDefaultEncryptedBackup",kind:"LinkedField",name:"messenger_default_encrypted_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"VestaGetUserInfoResponse",kind:"LinkedField",name:"vesta_user_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"attempts_remaining",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_registered",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"login_timeout_remaining_secs",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"encrypted_backup",plural:!1,selections:[t,o],storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"backup_state",storageKey:null}]},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[a,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"encrypted_backup_encryption_management_delegator_id",storageKey:null}],type:"User",abstractKey:null},o],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"xfb_backup",plural:!1,selections:[a,o,{alias:null,args:null,kind:"ScalarField",name:"last_sync_time",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"backup_creation_time",storageKey:null},{condition:"labyrinthOnePointOneSecurityUX",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"allow_sender_backup",storageKey:null}]},r,{alias:null,args:null,concreteType:"XFBEBVirtualDevice",kind:"LinkedField",name:"virtual_devices",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"client_generated_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"device_type",storageKey:null},o],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"logout_whitelist",storageKey:null}]},params:{id:n("MWChatEncryptedBackupsSettingsDialogQuery_facebookRelayOperation"),metadata:{},name:"MWChatEncryptedBackupsSettingsDialogQuery",operationKind:"query",text:null}}})();n("relay-runtime").PreloadableQueryRegistry.set(e.params.id,e),a.exports=e}),null);
__d("MWEBNoMobileEOTRInformationalDialog.entrypoint",["JSResourceForInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(){return{queries:{}}},root:r("JSResourceForInteraction")("MWEBNoMobileEOTRInformationalDialogForEntrypoint.react").__setRef("MWEBNoMobileEOTRInformationalDialog.entrypoint")};l.default=e}),98);
__d("MWEBOTCDialog.entrypoint",["JSResourceForInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(){return{queries:{}}},root:r("JSResourceForInteraction")("MWEBOTCDialog.react").__setRef("MWEBOTCDialog.entrypoint")};l.default=e}),98);
__d("MWEBQPWithPinState.enum",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({INITIAL:0,RESTORE_IN_PROGRESS:1}),l=e;i.default=l}),66);
__d("MWEBRestoreQPWithPin_viewer.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWEBRestoreQPWithPin_viewer",selections:[{args:null,kind:"FragmentSpread",name:"useMWChatEncryptedBackupsVestaUserInfo_viewer"},{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"encrypted_backup",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"has_seen_eb_auto_restore_notice",storageKey:null}],storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"qp_with_pin_state",storageKey:null}]}],type:"Viewer",abstractKey:null};a.exports=e}),null);
__d("useMWChatEncryptedBackupsAddDevice",["EBMainThreadEBDBApiDeferred","EBSMAPI","FBLogger","getErrorSafe","react","react-compiler-runtime","requireDeferred","useAsyncReStore"],(function(t,n,r,o,a,i,l){"use strict";var e=["onStart"],s,u=s||(s=o("react")),c=u.useCallback,d=u.useRef,m=u.useState,p=r("requireDeferred")("MAWEncryptedBackupsClearRecoveryCode").__setRef("useMWChatEncryptedBackupsAddDevice"),_=r("requireDeferred")("mwEBAddDevice").__setRef("useMWChatEncryptedBackupsAddDevice");function f(t){var n=o("react-compiler-runtime").c(12),a=t.environment,i=t.hsmFleetMigrationResetPIN,l=t.onComplete,s=t.onFailure,u=t.onInvalidRecoveryCode,c=t.onStart,f=m(!1),C=f[0],b=f[1],v;n[0]===Symbol.for("react.memo_cache_sentinel")?(v=function(){b(!1)},n[0]=v):v=n[0];var S=v,R=r("useAsyncReStore")(),L=d(""),E;n[1]!==R||n[2]!==a||n[3]!==i||n[4]!==l||n[5]!==s||n[6]!==u||n[7]!==c?(E=async function(n,o){L.current=o||"";try{var t=await Promise.all([R,p.load(),_.load()]),d=t[0],m=t[1],f=t[2],C=m.encryptedBackupsClearRecoveryCode,v=f.EBAddDevice;await C(d);var E={onFailure:function(t){S(),s(t)},onInvalidRecoveryCode:function(){S(),u()},onStart:function(){b(!0),c==null||c()},onSuccess:function(){r("EBSMAPI").fetchBackupIds("useMWChatEncryptedBackupsAddDevice").catch(y),S(),l(),i&&L.current!==""&&i(L.current)},recoveryCode:n,storage:d};E.onStart();var k=E.onStart,I=babelHelpers.objectWithoutPropertiesLoose(E,e);await v(babelHelpers.extends({},I,{environment:a,trackAddingDevice:h,trackOverprompting:g}))}catch(e){var T=e,D=r("getErrorSafe")(T);r("FBLogger")("wmi_eb").tags(["pin_restore","add_device_error"]).catching(D).warn("Error in addDevice"),S(),s("add_device_error")}},n[1]=R,n[2]=a,n[3]=i,n[4]=l,n[5]=s,n[6]=u,n[7]=c,n[8]=E):E=n[8];var k=E,I;return n[9]!==C||n[10]!==k?(I=[k,C],n[9]=C,n[10]=k,n[11]=I):I=n[11],I}function g(e){return o("EBMainThreadEBDBApiDeferred").trackOverprompting(e)}function h(){return o("EBMainThreadEBDBApiDeferred").addNewDevice()}function y(e){var t=r("getErrorSafe")(e);r("FBLogger")("wmi_eb").tags(["pin_restore","fetch_backup_ids_error"]).catching(t).warn("Error in fetchBackupIds")}l.default=f}),98);
__d("useMWChatEncryptedBackupsPinCodeRestore",["CometRelay","EBSMGatingUI","JSResourceForInteraction","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsSetIsDialogPersistedContext","MWEBODSEntityName.enum","MWEBPinCodeSize","MWEBUpsellDismissedEnum.facebook","MWEncryptedBackupsLocalStorageEntryEnum","QPLUserFlow","promiseDone","react","react-compiler-runtime","requireDeferred","useLabyrinthLogging","useMWChatEncryptedBackupsAddDevice","useMWChatEncryptedBackupsNumericCode","useMWEBFlowSourceContext","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=u.useCallback,d=u.useContext,m=u.useEffect,p=u.useRef,_=u.useState,f=r("requireDeferred")("MWEBUseLocalStorage").__setRef("useMWChatEncryptedBackupsPinCodeRestore"),g=r("requireDeferred")("MWEncryptedBackupsSharedState").__setRef("useMWChatEncryptedBackupsPinCodeRestore"),h=r("requireDeferred")("mwEBGetPINSecretFromVesta").__setRef("useMWChatEncryptedBackupsPinCodeRestore"),y=r("requireDeferred")("updateUpsellsStateInRelayStore").__setRef("useMWChatEncryptedBackupsPinCodeRestore"),C=r("JSResourceForInteraction")("MWEncryptedBackupsHsmFleetMigrationGated").__setRef("useMWChatEncryptedBackupsPinCodeRestore");function b(t){var n=o("react-compiler-runtime").c(47),a=t.clientID,i=t.focusRegionId,l=t.onSubmitPin,s=t.onSubmitPinFailure,u=t.onVestaComplete,c=o("CometRelay").useRelayEnvironment(),b=_(!1),S=b[0],R=b[1],L=_(!1),E=L[0],k=L[1],I=_(!1),T=I[0],D=I[1],x=p(!1),$=o("useLabyrinthLogging").useLabyrinthLoggingFlow(),P=$.startFlow,N=(e||(e=r("useReStore")))(),M=r("useMWEBFlowSourceContext")(),w=_(!1),A=w[0],F=w[1],O=d(r("MWChatEncryptedBackupsSetIsDialogPersistedContext")).setIsDialogPersisted,B;n[0]!==N||n[1]!==c||n[2]!==P?(B=function(t){r("promiseDone")(C.load().then(function(e){e({db:N,environment:c,pinCode:t,startFlow:P})}))},n[0]=N,n[1]=c,n[2]=P,n[3]=B):B=n[3];var W=B,q;n[4]!==N||n[5]!==c||n[6]!==u?(q=function(){var e;r("QPLUserFlow").addPoint((e=o("MWChatEncryptedBackupsQPLEvents")).restoreDeviceAuthQplEvent,"add_device_success"),r("QPLUserFlow").addPoint(e.restoreQplEvent,"restore_auth_finished_and_dismissed"),g.onReady(function(e){var t=e.upsertEBSharedStateEntry;r("promiseDone")(t({db:N,stateKey:r("MWEncryptedBackupsLocalStorageEntryEnum").ENCRYPTED_BACKUPS_RESTORED_SUCCESSFULLY}))}),f.onReady(v),o("MWChatEncryptedBackupsLogging").endSuccess({annotations:{bool:{is_backend_setup:o("EBSMGatingUI").isBackendSetupSuccessfulForEBSM()}},event:e.restoreQplEvent}),o("MWChatEncryptedBackupsLogging").endSuccess({event:e.restoreDeviceAuthQplEvent,odsEntityName:r("MWEBODSEntityName.enum").MW_EB_PIN_RESTORE_AUTH}),u(),F(!1),r("promiseDone")(y.load(),function(e){e({environment:c,updateValue:o("MWEBUpsellDismissedEnum.facebook").MWEBUpsellDismissedStateEnum.UPSELLS_DISMISSED})})},n[4]=N,n[5]=c,n[6]=u,n[7]=q):q=n[7];var U=q,V;n[8]!==c||n[9]!==s||n[10]!==O?(V=function(t){s==null||s(),x.current=!0,k(!0),F(!1),r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,t),o("MWChatEncryptedBackupsLogging").endFailure({errorName:t,event:o("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent,odsEntityName:r("MWEBODSEntityName.enum").MW_EB_PIN_RESTORE_AUTH}),r("promiseDone")(y.load(),function(e){e({environment:c,updateValue:o("MWEBUpsellDismissedEnum.facebook").MWEBUpsellDismissedStateEnum.NOT_DISMISSED})}),O==null||O(!1)},n[8]=c,n[9]=s,n[10]=O,n[11]=V):V=n[11];var H=V,G;n[12]!==c||n[13]!==s||n[14]!==O?(G=function(){s==null||s(),x.current=!0,k(!0),F(!1),o("MWChatEncryptedBackupsLogging").endFailure({errorName:"pin_code_restore_wrong_recovery_code",event:o("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent,odsEntityName:r("MWEBODSEntityName.enum").MW_EB_PIN_RESTORE_AUTH}),r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"pin_code_restore_wrong_recovery_code"),r("promiseDone")(y.load(),function(e){e({environment:c,updateValue:o("MWEBUpsellDismissedEnum.facebook").MWEBUpsellDismissedStateEnum.NOT_DISMISSED})}),O==null||O(!1)},n[12]=c,n[13]=s,n[14]=O,n[15]=G):G=n[15];var z=G,j;n[16]!==c||n[17]!==W||n[18]!==U||n[19]!==H||n[20]!==z?(j={environment:c,hsmFleetMigrationResetPIN:W,onComplete:U,onFailure:H,onInvalidRecoveryCode:z},n[16]=c,n[17]=W,n[18]=U,n[19]=H,n[20]=z,n[21]=j):j=n[21];var K=r("useMWChatEncryptedBackupsAddDevice")(j),Q=K[0],X;n[22]===Symbol.for("react.memo_cache_sentinel")?(X=function(){k(!1),D(!1),R(!1)},n[22]=X):X=n[22];var Y;n[23]!==Q||n[24]!==a||n[25]!==c||n[26]!==M||n[27]!==l||n[28]!==s||n[29]!==O||n[30]!==P?(Y=async function(t){var e=await h.load();await e({addDevice:Q,clientID:a,environment:c,getSourceFromContext:M,onSubmitPin:l,onSubmitPinFailure:s,onVestaSecretFetch:function(){O==null||O(!0)},pinCode:t,productUseCase:"MSGR_ENC_BACKUP",setIsInProgress:F,setIsPinCodeIncorrect:R,setIsVestaError:D,startFlow:P})},n[23]=Q,n[24]=a,n[25]=c,n[26]=M,n[27]=l,n[28]=s,n[29]=O,n[30]=P,n[31]=Y):Y=n[31];var J;n[32]!==i||n[33]!==Y?(J={enableMasking:!0,focusRegionId:i,inputSize:o("MWEBPinCodeSize").EB_PIN_CODE_SIZE,onChange:X,onComplete:Y,type:"pin"},n[32]=i,n[33]=Y,n[34]=J):J=n[34];var Z=o("useMWChatEncryptedBackupsNumericCode").useMWChatEncryptedBackupsNumericCode(J),ee=Z[0],te=Z[1],ne=te.clearNumericInput,re=te.disabled,oe=te.focusOnInput,ae=te.invalidKeyPressedError,ie,le;n[35]!==ne?(ie=function(){x.current&&(ne(),x.current=!1)},le=[ne],n[35]=ne,n[36]=ie,n[37]=le):(ie=n[36],le=n[37]),m(ie,le);var se=re!=null?re:!1,ue;return n[38]!==oe||n[39]!==ee||n[40]!==ae||n[41]!==A||n[42]!==E||n[43]!==S||n[44]!==T||n[45]!==se?(ue={focusOnInput:oe,inputProps:ee,invalidKeyPressedError:ae,isDisabled:se,isInProgress:A,isLabyrinthError:E,isPinCodeIncorrect:S,isVestaError:T},n[38]=oe,n[39]=ee,n[40]=ae,n[41]=A,n[42]=E,n[43]=S,n[44]=T,n[45]=se,n[46]=ue):ue=n[46],ue}function v(e){var t=e.mwEBCreateLocalStorageEntry,n=e.mwEBDeleteLocalStorageEntry;t(r("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_HAS_RESTORED_IN_CURRENT_SESSION),t(r("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_HAS_RESTORED_IN_CURRENT_SESSION_2),n(r("MWEncryptedBackupsLocalStorageEntryEnum").EBSM_CORRUPTION_WIPE)}l.useMWChatEncryptedBackupsPinCodeRestore=b}),98);
__d("useMWEBSetHasSeenNoticeMutation_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9618790408209960"}),null);
__d("useMWEBSetHasSeenNoticeMutation.graphql",["useMWEBSetHasSeenNoticeMutation_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{alias:null,args:null,concreteType:"SetHasSeenEbAutoRestoreNoticeResponsePayload",kind:"LinkedField",name:"set_has_seen_eb_auto_restore_notice",plural:!1,selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useMWEBSetHasSeenNoticeMutation",selections:e,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"useMWEBSetHasSeenNoticeMutation",selections:e},params:{id:n("useMWEBSetHasSeenNoticeMutation_facebookRelayOperation"),metadata:{},name:"useMWEBSetHasSeenNoticeMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("useMWEBSetHasSeenNotice",["CometRelay","react","react-compiler-runtime","useMWEBSetHasSeenNoticeMutation.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useCallback;function c(){var t=o("react-compiler-runtime").c(3),r;t[0]===Symbol.for("react.memo_cache_sentinel")?(r=e!==void 0?e:e=n("useMWEBSetHasSeenNoticeMutation.graphql"),t[0]=r):r=t[0];var a=o("CometRelay").useMutation(r),i=a[0],l;return t[1]!==i?(l=function(){i({variables:{}})},t[1]=i,t[2]=l):l=t[2],l}l.default=c}),98);
__d("useMWEBAutoRestoreNoticeDialog",["JSResourceForInteraction","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsQPLEvents","MWEBUseLocalStorage","MWEncryptedBackupsLocalStorageEntryEnum","QPLUserFlow","ReQL","ReQLSuspense","react","react-compiler-runtime","useLabyrinthLogging","useMWEBSetHasSeenNotice","useMWXLazyDialog","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useCallback,c=r("JSResourceForInteraction")("MWEBAutoRestoreNoticeDialog.react").__setRef("useMWEBAutoRestoreNoticeDialog");function d(){var t=o("react-compiler-runtime").c(9),n=o("useLabyrinthLogging").useLabyrinthLoggingFlow(),a=n.startFlow,l=r("useMWXLazyDialog")(c),s=l[0],u=(e||(e=r("useReStore")))(),d;t[0]!==u.tables.auto_restore_opt_out?(d=function(){return o("ReQL").fromTableAscending(u.tables.auto_restore_opt_out)},t[0]=u.tables.auto_restore_opt_out,t[1]=d):d=t[1];var p;t[2]!==u?(p=[u],t[2]=u,t[3]=p):p=t[3];var _=o("ReQLSuspense").useArray(d,p,i.id+":45"),f=r("useMWEBSetHasSeenNotice")(),g;return t[4]!==_||t[5]!==f||t[6]!==s||t[7]!==a?(g=function(t){var e=t.hasSeenNotice,n=t.source,i=_.filter(m).length>0;if(a({event:o("MWChatEncryptedBackupsQPLEvents").restoreWithAutoRestoreConsentQplEvent,source:n}),i){r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreWithAutoRestoreConsentQplEvent,"AUTO_RESTORE_NOTICE_SCREEN_OPTED_OUT"),o("MWChatEncryptedBackupsLogging").endSuccess({event:o("MWChatEncryptedBackupsQPLEvents").restoreWithAutoRestoreConsentQplEvent});return}if(r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreWithAutoRestoreConsentQplEvent,"AUTO_RESTORE_NOTICE_SCREEN_OPTED_IN"),o("MWEBUseLocalStorage").mwEBCreateLocalStorageEntry(r("MWEncryptedBackupsLocalStorageEntryEnum").ENCRYPTED_BACKUPS_REMEMBER_BROWSER_CONSENT),e){o("MWChatEncryptedBackupsLogging").endSuccess({event:o("MWChatEncryptedBackupsQPLEvents").restoreWithAutoRestoreConsentQplEvent});return}f(),s({})},t[4]=_,t[5]=f,t[6]=s,t[7]=a,t[8]=g):g=t[8],g}function m(e){return e.optOutKey===r("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_HAS_OPTED_OUT_OF_AUTO_RESTORE}l.default=d}),98);
__d("MWEBRestoreQPWithPin.react",["fbt","CometPlaceholder.react","CometRelay","CometVisualCompletionAttributes","EncryptedBackupsSupportedPlatformUtils","FBLogger","FocusRegion.react","JSResourceForInteraction","MWChatEBPinCodeVerifyIndicator.react","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsNumericCodeErrorWrapper.react","MWChatEncryptedBackupsNumericCodeInput.react","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsQPLSource.enum","MWChatEncryptedBackupsRestoreJewelForgotPinButtonSuspender.react","MWEBFlowSourceContextProvider.react","MWEBOTCDialog.entrypoint","MWEBQPWithPinState.enum","MWEBRestoreQPWithPin_viewer.graphql","MWEncryptedBackupsForgotPinStep","MWEncryptedBackupsRetrieveQplLoggingAnnotations","MWJewelPopoverDialogContext.react","MWLogInboxFiltersInteraction","MWLogInteraction","MWXCircleButton.react","MWXColumn.react","MWXColumnItem.react","MWXIconCross","MWXImage.react","MWXLink.react","MWXRow.react","MWXRowItem.react","MWXText.react","QPLUserFlow","focusScopeQueries","getMWEBRestoreQPCautionCircleProperties","gkx","promiseDone","react","react-compiler-runtime","useAsyncReStore","useLabyrinthLogging","useMWChatEncryptedBackupsPinCodeRestore","useMWChatEncryptedBackupsVestaUserInfo","useMWEBAutoRestoreNoticeDialog","useMWEBFlowSourceContext","useMWXEntryPointDialog","useMWXLazyDialog","useVisibilityObserver"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react")),d=u,m=d.useCallback,p=d.useContext,_=d.useEffect,f=d.useMemo,g=d.useRef,h=d.useState,y=r("JSResourceForInteraction")("MWChatEncryptedBackupsPinCodeBlockedDialog.react").__setRef("MWEBRestoreQPWithPin.react"),C="chat-encrypted-backups-jewel-qp-with-pin-input",b={icon:{paddingTop:"x889kno",$$css:!0}};function v(t){var a,i,l=o("react-compiler-runtime").c(82),u=t.clientID,d=t.doesUserHaveOtcEligibleDevices,m=t.fragmentKey,f=t.isInbox,v=t.setClosed,k=t.setDismissed,I=o("CometRelay").useFragment(e!==void 0?e:e=n("MWEBRestoreQPWithPin_viewer.graphql"),m),T=o("CometRelay").useRelayEnvironment(),D;l[0]!==T?(D=function(t){return o("CometRelay").commitLocalUpdate(T,function(e){var n=e.getRoot().getLinkedRecord("viewer");if(n==null){r("FBLogger")("wmi_eb").mustfix("[labyrinth][jewel_softblock_state] A viewer record does not exist when propagating EB restore qp with pin state");return}n.setValue(t,"qp_with_pin_state")})},l[0]=T,l[1]=D):D=l[1];var x=D,$;l[2]!==I?($={viewer$key:I},l[2]=I,l[3]=$):$=l[3];var P=r("useMWChatEncryptedBackupsVestaUserInfo")($),N=P.attemptsRemaining===0||P.loginTimeoutRemainingSecs!=null,M=h(!1),w=M[0],A=M[1],F=g(!1),O=r("useMWXLazyDialog")(y),B=O[0],W,q;l[4]!==N||l[5]!==B||l[6]!==w||l[7]!==P.attemptsRemaining||l[8]!==P.loginTimeoutRemainingSecs||l[9]!==P.refetchVestaClientInfo?(W=function(){N&&w===!0&&F.current!==!0&&(F.current=!0,B({attemptsRemaining:P.attemptsRemaining,loginTimeoutRemainingSecs:P.loginTimeoutRemainingSecs,onDismiss:E,refetchVestaClientInfo:P.refetchVestaClientInfo}))},q=[N,B,w,P.attemptsRemaining,P.loginTimeoutRemainingSecs,P.refetchVestaClientInfo],l[4]=N,l[5]=B,l[6]=w,l[7]=P.attemptsRemaining,l[8]=P.loginTimeoutRemainingSecs,l[9]=P.refetchVestaClientInfo,l[10]=W,l[11]=q):(W=l[10],q=l[11]),_(W,q);var U=o("useLabyrinthLogging").useLabyrinthLoggingFlow(),V=U.startFlow,H=r("useAsyncReStore")(),G=r("useMWEBFlowSourceContext")(),z;l[12]!==G?(z=G(),l[12]=G,l[13]=z):z=l[13];var j=z,K;l[14]!==H||l[15]!==d||l[16]!==N||l[17]!==j||l[18]!==V?(K=function(t){r("promiseDone")(H.then(function(e){o("MWEncryptedBackupsRetrieveQplLoggingAnnotations").encryptedBackupsRetrieveQplLoggingAnnotations({db:e,onFetch:function(n){var e=n.ebsmWiped,a=n.firstUpsellTime,i=n.hasEbKeysLocally,l=n.hasEBSM,s=n.hasPDB,u=n.hasUserRestoredBefore,c=n.hasUserRestoredBeforeTemp;V({additionalAnnotations:{eb_session_identifier:a,ebsm_wiped:e,has_eb_keys_locally:i,has_ebsm:l,has_pdb:s,has_user_restored_before:u,has_user_restored_before_temp:c,is_otc_eligible:d.toString(),is_pin_locked_blocked:N.toString(),is_pin_set:"true",restore_upsell_first_impression_time:a},event:o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,source:j}),r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,t)}})}))},l[14]=H,l[15]=d,l[16]=N,l[17]=j,l[18]=V,l[19]=K):K=l[19];var Q=K,X;l[20]!==f||l[21]!==v||l[22]!==k||l[23]!==Q?(X=function(){var e=f?"RESTORE_QP_WITH_PIN_INBOX_DISMISSED":"RESTORE_QP_WITH_PIN_JEWEL_DISMISSED";Q(e),o("MWChatEncryptedBackupsLogging").cancelFlow({cancelEndPoint:"thread_list_qp_with_pin",event:o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent}),v(),k()},l[20]=f,l[21]=v,l[22]=k,l[23]=Q,l[24]=X):X=l[24];var Y=X,J=p(r("MWJewelPopoverDialogContext.react")),Z=J.setIsOpenForDialog,ee=r("useMWEBAutoRestoreNoticeDialog")(),te;if(l[25]!==ee||l[26]!==(I==null||(a=I.encrypted_backup)==null?void 0:a.has_seen_eb_auto_restore_notice)||l[27]!==j||l[28]!==v||l[29]!==Z||l[30]!==x){var ne;te=function(){var e,t;v(),ee({hasSeenNotice:(e=I==null||(t=I.encrypted_backup)==null?void 0:t.has_seen_eb_auto_restore_notice)!=null?e:!1,source:j}),Z(!0),x(r("MWEBQPWithPinState.enum").INITIAL)},l[25]=ee,l[26]=I==null||(ne=I.encrypted_backup)==null?void 0:ne.has_seen_eb_auto_restore_notice,l[27]=j,l[28]=v,l[29]=Z,l[30]=x,l[31]=te}else te=l[31];I==null||(i=I.encrypted_backup)==null||i.has_seen_eb_auto_restore_notice;var re=te,oe,ae;l[32]!==x?(ae=function(){A(!0),o("MWLogInteraction").logPopoverOpenCancel("initiate_restore"),o("MWLogInboxFiltersInteraction").logInboxFiltersNavigationCancel("initiate_restore"),x(r("MWEBQPWithPinState.enum").RESTORE_IN_PROGRESS)},oe=function(){x(r("MWEBQPWithPinState.enum").INITIAL)},l[32]=x,l[33]=oe,l[34]=ae):(oe=l[33],ae=l[34]);var ie;l[35]!==u||l[36]!==re||l[37]!==oe||l[38]!==ae?(ie={clientID:u,focusRegionId:C,onSubmitPin:ae,onSubmitPinFailure:oe,onVestaComplete:re},l[35]=u,l[36]=re,l[37]=oe,l[38]=ae,l[39]=ie):ie=l[39];var le=o("useMWChatEncryptedBackupsPinCodeRestore").useMWChatEncryptedBackupsPinCodeRestore(ie),se=le.inputProps,ue=le.invalidKeyPressedError,ce=le.isInProgress,de=le.isLabyrinthError,me=le.isPinCodeIncorrect,pe=le.isVestaError,_e=r("gkx")("23219"),fe=(I==null?void 0:I.qp_with_pin_state)===r("MWEBQPWithPinState.enum").RESTORE_IN_PROGRESS||ce,ge=_e||!r("gkx")("19484"),he;l[40]!==f||l[41]!==Q?(he={onVisible:function(){ge&&o("FocusRegion.react").focusRegionById(C,o("focusScopeQueries").tabbableScopeQuery);var e=f?"RESTORE_QP_WITH_PIN_INBOX_IMPRESSION":"RESTORE_QP_WITH_PIN_JEWEL_IMPRESSION";Q(e)}},l[40]=f,l[41]=Q,l[42]=he):he=l[42];var ye=r("useVisibilityObserver")(he),Ce;l[43]===Symbol.for("react.memo_cache_sentinel")?(Ce={},l[43]=Ce):Ce=l[43];var be=r("useMWXEntryPointDialog")(r("MWEBOTCDialog.entrypoint"),Ce),ve=be[0],Se;l[44]!==f||l[45]!==ve?(Se=function(){ve({source:f?r("MWChatEncryptedBackupsQPLSource.enum").INBOX_THREADLIST_QP:r("MWChatEncryptedBackupsQPLSource.enum").JEWEL_THREADLIST_QP},L)},l[44]=f,l[45]=ve,l[46]=Se):Se=l[46];var Re=Se,Le;l[47]!==ue||l[48]!==de||l[49]!==me||l[50]!==pe?(Le=ue!=null?ue:me?s._(/*BTDS*/"Sai m\u00e3 PIN. H\u00e3y th\u1eed l\u1ea1i."):de||pe?s._(/*BTDS*/"\u0110\u00e3 x\u1ea3y ra l\u1ed7i khi d\u00f9ng M\u00e3 PIN, vui l\u00f2ng th\u1eed l\u1ea1i"):void 0,l[47]=ue,l[48]=de,l[49]=me,l[50]=pe,l[51]=Le):Le=l[51];var Ee=Le;if(N===!0)return v(),null;var ke;l[52]===Symbol.for("react.memo_cache_sentinel")?(ke={0:{className:"xlhe6ec x1obq294 x5a5i1n xde0f50 x15x8krk xe4pinz x14vqqas x1ys307a xod5an3 xyqm7xq xz9dl7a xpdmqnj xsag5q8 x1g0dm76"},1:{className:"x1obq294 x5a5i1n xde0f50 x15x8krk xe4pinz x14vqqas x1ys307a xod5an3 xyqm7xq xz9dl7a xpdmqnj xsag5q8 x1g0dm76 x1jx94hy"}}[!!_e<<0],l[52]=ke):ke=l[52];var Ie;l[53]===Symbol.for("react.memo_cache_sentinel")?(Ie=c.jsx(r("MWXRowItem.react"),{xstyle:b.icon,children:c.jsx(r("MWXImage.react"),{src:r("getMWEBRestoreQPCautionCircleProperties")()})}),l[53]=Ie):Ie=l[53];var Te;l[54]===Symbol.for("react.memo_cache_sentinel")?(Te=c.jsx(r("MWXColumnItem.react"),{children:c.jsx(r("MWXText.react"),{align:"start",isSemanticHeading:!0,numberOfLines:2,type:"headlineEmphasized4",children:s._(/*BTDS*/"Thi\u1ebfu l\u1ecbch s\u1eed chat")})}),l[54]=Te):Te=l[54];var De;l[55]===Symbol.for("react.memo_cache_sentinel")?(De=c.jsx(r("MWXRowItem.react"),{expanding:!0,children:c.jsxs(r("MWXColumn.react"),{paddingTop:8,spacing:12,children:[Te,c.jsx(r("MWXColumnItem.react"),{children:c.jsx(r("MWXText.react"),{align:"start",color:_e?"secondary":"primary",numberOfLines:2,type:"body4",children:s._(/*BTDS*/"Nh\u1eadp m\u00e3 PIN \u0111\u1ec3 kh\u00f4i ph\u1ee5c l\u1ecbch s\u1eed chat.")})})]})}),l[55]=De):De=l[55];var xe;l[56]===Symbol.for("react.memo_cache_sentinel")?(xe=s._(/*BTDS*/"\u0110\u00f3ng th\u00f4ng b\u00e1o kh\u00f4i ph\u1ee5c l\u1ecbch s\u1eed chat"),l[56]=xe):xe=l[56];var $e;l[57]!==Y?($e=c.jsx(r("MWXColumnItem.react"),{children:c.jsxs(r("MWXRow.react"),{paddingHorizontal:0,paddingVertical:0,spacing:12,children:[Ie,De,c.jsx(r("MWXRowItem.react"),{children:c.jsx(r("MWXCircleButton.react"),{"aria-label":xe,color:"primary",icon:r("MWXIconCross"),onPress:Y,size:_e?24:32,testid:void 0})})]})}),l[57]=Y,l[58]=$e):$e=l[58];var Pe;l[59]!==se||l[60]!==fe?(Pe=c.jsx(r("MWChatEncryptedBackupsNumericCodeInput.react"),babelHelpers.extends({},se,{color:_e?"primary":"secondary",disabled:fe,inputSize:"small",testid:void 0,withAutoFocus:ge})),l[59]=se,l[60]=fe,l[61]=Pe):Pe=l[61];var Ne;l[62]!==Ee||l[63]!==Pe?(Ne=c.jsx(r("MWXColumnItem.react"),{paddingTop:16,children:c.jsx(r("MWChatEncryptedBackupsNumericCodeErrorWrapper.react"),{error:Ee,inputSize:"small",children:Pe})}),l[62]=Ee,l[63]=Pe,l[64]=Ne):Ne=l[64];var Me;l[65]!==fe?(Me=fe&&c.jsx(r("MWXColumnItem.react"),{align:"center",children:c.jsx("div",{className:"xfitlp5 x9otpla",children:c.jsx(r("MWChatEBPinCodeVerifyIndicator.react"),{isMessenger:_e})})}),l[65]=fe,l[66]=Me):Me=l[66];var we;l[67]!==d||l[68]!==Ee||l[69]!==fe||l[70]!==Re||l[71]!==Z?(we=!fe&&c.jsx(r("MWXColumnItem.react"),{align:"center",children:c.jsx("div",babelHelpers.extends({},{0:{},2:{className:"xod5an3"},1:{className:"x12nagc x1iorvi4"},3:{className:"x12nagc x1iorvi4"}}[(Ee==null)<<1|(Ee!=null)<<0],{children:c.jsx(r("MWXText.react"),{color:"blueLink",type:"bodyLink4",children:d===!0?c.jsx(r("MWXLink.react"),{onClick:function(){r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_USE_ONE_TIME_CODE_CLICK"),Z(!0),Re()},children:s._(/*BTDS*/"S\u1eed d\u1ee5ng m\u00e3 d\u00f9ng m\u1ed9t l\u1ea7n")}):c.jsx("div",babelHelpers.extends({},r("CometVisualCompletionAttributes").IGNORE,{children:c.jsx(r("CometPlaceholder.react"),{fallback:c.jsx(r("MWXLink.react"),babelHelpers.extends({testid:void 0},o("MWEncryptedBackupsForgotPinStep").STATIC_HELP_CENTER_LINK_PROPS,{onClick:R})),name:"mw-chat-encrypted-backups-jewel-forgot-pin-fallback-link",children:c.jsx(r("MWChatEncryptedBackupsRestoreJewelForgotPinButtonSuspender.react"),{children:S})})}))})}))}),l[67]=d,l[68]=Ee,l[69]=fe,l[70]=Re,l[71]=Z,l[72]=we):we=l[72];var Ae;l[73]!==ye||l[74]!==$e||l[75]!==Ne||l[76]!==Me||l[77]!==we?(Ae=c.jsxs(r("MWXColumn.react"),{ref:ye,testid:void 0,children:[$e,Ne,Me,we]}),l[73]=ye,l[74]=$e,l[75]=Ne,l[76]=Me,l[77]=we,l[78]=Ae):Ae=l[78];var Fe;return l[79]!==ke||l[80]!==Ae?(Fe=c.jsx("div",babelHelpers.extends({},ke,{children:Ae})),l[79]=ke,l[80]=Ae,l[81]=Fe):Fe=l[81],Fe}function S(e){var t=e.linkProps;return c.jsx(r("MWXLink.react"),babelHelpers.extends({testid:void 0},t,{onClick:function(n){r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RESTORE_FORGOT_PIN_CLICK"),t.onClick==null||t.onClick(n)}}))}S.displayName=S.name+" [from "+i.id+"]";function R(e){r("FBLogger")("wmi_eb").tags(["jewel_restore_qp"]).warn("User clicked on the placeholder Forgot PIN button"),o("MWEncryptedBackupsForgotPinStep").STATIC_HELP_CENTER_LINK_PROPS.onClick==null||o("MWEncryptedBackupsForgotPinStep").STATIC_HELP_CENTER_LINK_PROPS.onClick(e)}function L(){r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_CLOSE_DIALOG_CLICK")}function E(){}function k(e){var t=o("react-compiler-runtime").c(10),n=e.clientID,a=e.currentSupportedPlatform,i=e.doesUserHaveOtcEligibleDevices,l=e.fragmentKey,s=e.setClosed,u=e.setDismissed,d=a!==o("EncryptedBackupsSupportedPlatformUtils").EncryptedBackupsSupportedPlatform.FACEBOOK_DOT_COM,m=d?r("MWChatEncryptedBackupsQPLSource.enum").INBOX_THREADLIST_QP_WITH_PIN:r("MWChatEncryptedBackupsQPLSource.enum").JEWEL_THREADLIST_QP_WITH_PIN,p;t[0]!==n||t[1]!==i||t[2]!==l||t[3]!==d||t[4]!==s||t[5]!==u?(p=c.jsx(v,{clientID:n,doesUserHaveOtcEligibleDevices:i,fragmentKey:l,isInbox:d,setClosed:s,setDismissed:u}),t[0]=n,t[1]=i,t[2]=l,t[3]=d,t[4]=s,t[5]=u,t[6]=p):p=t[6];var _;return t[7]!==m||t[8]!==p?(_=c.jsx(r("MWEBFlowSourceContextProvider.react"),{source:m,children:p}),t[7]=m,t[8]=p,t[9]=_):_=t[9],_}l.default=k}),226);
__d("MWEBUntrustedMobileEOTRInformationalDialog.entrypoint",["JSResourceForInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(){return{queries:{}}},root:r("JSResourceForInteraction")("MWEBUntrustedMobileEOTRInformationalDialogForEntrypoint.react").__setRef("MWEBUntrustedMobileEOTRInformationalDialog.entrypoint")};l.default=e}),98);
__d("MWEncryptedBackupsThreadListPersistentBanner.react",["fbt","EncryptedBackupsSupportedPlatformUtils","MAWEncryptedBackupsRestoreDialog.entrypoint","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsQPLSource.enum","MWEncryptedBackupsRetrieveQplLoggingAnnotations","MWJewelPopoverDialogContext.react","MWXLink.react","MWXText.react","QPLUserFlow","promiseDone","react","react-compiler-runtime","requireDeferred","useLabyrinthLogging","useMWXEntryPointDialog","useReStore","useVisibilityObserver"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react")),d=u,m=d.useContext,p=d.useRef,_=r("requireDeferred")("mwEBCheckIfEBKeysExistInDisk").__setRef("MWEncryptedBackupsThreadListPersistentBanner.react");function f(t){var n=o("react-compiler-runtime").c(23),a=t.onDismissUpsell,i;n[0]===Symbol.for("react.memo_cache_sentinel")?(i={},n[0]=i):i=n[0];var l=r("useMWXEntryPointDialog")(r("MAWEncryptedBackupsRestoreDialog.entrypoint"),i),u=l[0],d=o("EncryptedBackupsSupportedPlatformUtils").useMWEncryptedBackupsGetCurrentSupportedPlatform(),f=d!==o("EncryptedBackupsSupportedPlatformUtils").EncryptedBackupsSupportedPlatform.FACEBOOK_DOT_COM,g=m(r("MWJewelPopoverDialogContext.react")),h=g.setIsOpenForDialog,y=(e||(e=r("useReStore")))(),C=o("useLabyrinthLogging").useLabyrinthLoggingFlow(),b=C.startFlow,v=p(!1),S=f?r("MWChatEncryptedBackupsQPLSource.enum").INBOX_THREADLIST_PERSISTENT_BANNER:r("MWChatEncryptedBackupsQPLSource.enum").JEWEL_THREADLIST_PERSISTENT_BANNER,R;n[1]!==y||n[2]!==S||n[3]!==b?(R=function(t){o("MWEncryptedBackupsRetrieveQplLoggingAnnotations").encryptedBackupsRetrieveQplLoggingAnnotations({db:y,onFetch:function(n){var e=n.ebsmWiped,a=n.firstUpsellTime,i=n.hasEbKeysLocally,l=n.hasEBSM,s=n.hasPDB,u=n.hasUserRestoredBefore,c=n.hasUserRestoredBeforeTemp;b({additionalAnnotations:{eb_session_identifier:a,ebsm_wiped:e,has_eb_keys_locally:i,has_ebsm:l,has_pdb:s,has_user_restored_before:u,has_user_restored_before_temp:c,restore_upsell_first_impression_time:a},event:o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,source:S}),r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,t),v.current===!1&&(v.current=!0,r("promiseDone")(_.load(),function(e){return e(i)}))}})},n[1]=y,n[2]=S,n[3]=b,n[4]=R):R=n[4];var L=R,E;n[5]!==f||n[6]!==L?(E={onVisible:function(){L(f?"RESTORE_THREAD_LIST_PERSISTENT_BANNER_IMPRESSION_INBOX":"RESTORE_THREAD_LIST_PERSISTENT_BANNER_IMPRESSION")}},n[5]=f,n[6]=L,n[7]=E):E=n[7];var k=r("useVisibilityObserver")(E),I;n[8]===Symbol.for("react.memo_cache_sentinel")?(I={className:"xlhe6ec x1obq294 x5a5i1n xde0f50 x15x8krk x1xmf6yo x1e56ztr xyqm7xq x1ys307a x6ikm8r x10wlt62 xyamay9 x1l90r2v xf7dkkf xv54qhq"},n[8]=I):I=n[8];var T;n[9]===Symbol.for("react.memo_cache_sentinel")?(T=s._(/*BTDS*/"Thi\u1ebfu l\u1ecbch s\u1eed chat."),n[9]=T):T=n[9];var D;n[10]!==f||n[11]!==a||n[12]!==h||n[13]!==u||n[14]!==S||n[15]!==L?(D=function(){h(!0),L(f?"RESTORE_THREAD_LIST_PERSISTENT_BANNER_CTA_CLICKED_INBOX":"RESTORE_THREAD_LIST_PERSISTENT_BANNER_CTA_CLICKED"),u({onDismissUpsell:a,source:S})},n[10]=f,n[11]=a,n[12]=h,n[13]=u,n[14]=S,n[15]=L,n[16]=D):D=n[16];var x;n[17]===Symbol.for("react.memo_cache_sentinel")?(x=s._(/*BTDS*/"Kh\u00f4i ph\u1ee5c ngay"),n[17]=x):x=n[17];var $;n[18]!==D?($=c.jsx(r("MWXText.react"),{color:"primary",type:"body4",children:c.jsxs(c.Fragment,{children:[T," ",c.jsx(r("MWXText.react"),{color:"blueLink",type:"bodyLink4",children:c.jsx(r("MWXLink.react"),{onClick:D,target:"_blank",testid:void 0,children:x})})]})}),n[18]=D,n[19]=$):$=n[19];var P;return n[20]!==k||n[21]!==$?(P=c.jsx("div",babelHelpers.extends({},I,{ref:k,children:$})),n[20]=k,n[21]=$,n[22]=P):P=n[22],P}l.default=f}),226);
__d("MWEncryptedBackupsThreadListRestoreQPWrapper_query.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWEncryptedBackupsThreadListRestoreQPWrapper_query",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"MWEncryptedBackupsThreadListRestoreQPWrapper_viewer"}],storageKey:null}],type:"Query",abstractKey:null};a.exports=e}),null);
__d("MWEncryptedBackupsThreadListRestoreQPWrapper_viewer.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWEncryptedBackupsThreadListRestoreQPWrapper_viewer",selections:[{args:null,kind:"FragmentSpread",name:"MWEBRestoreQPWithPin_viewer"}],type:"Viewer",abstractKey:null};a.exports=e}),null);
__d("MWEncryptedBackupsVerifyDeviceNux.react",["fbt","EncryptedBackupsSupportedPlatformUtils","MAWEncryptedBackupsRestoreDialog.entrypoint","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsQPLSource.enum","MWEBVestaUserInfoContext.react","MWEBVirtualDevicesContext.react","MWEncryptedBackupsRetrieveQplLoggingAnnotations","MWJewelPopoverDialogContext.react","MWXQPCard.react","QPLUserFlow","getMWEBRestoreQPCautionCircleProperties","promiseDone","react","react-compiler-runtime","requireDeferred","useLabyrinthLogging","useMWXEntryPointDialog","useReStore","useVisibilityObserver"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react")),d=u,m=d.useContext,p=d.useRef,_=r("requireDeferred")("mwEBCheckIfEBKeysExistInDisk").__setRef("MWEncryptedBackupsVerifyDeviceNux.react");function f(t){var n=o("react-compiler-runtime").c(47),a=t.children,i=t.currentSupportedPlatform,l=t.setClosed,u=t.setDismissed,d=o("MWEBVestaUserInfoContext.react").useMWEBIsCooldownOrLockOutState(),f;n[0]===Symbol.for("react.memo_cache_sentinel")?(f={},n[0]=f):f=n[0];var g=r("useMWXEntryPointDialog")(r("MAWEncryptedBackupsRestoreDialog.entrypoint"),f),h=g[0],y=(e||(e=r("useReStore")))(),C=i!==o("EncryptedBackupsSupportedPlatformUtils").EncryptedBackupsSupportedPlatform.FACEBOOK_DOT_COM,b=C?r("MWChatEncryptedBackupsQPLSource.enum").INBOX_THREADLIST_QP:r("MWChatEncryptedBackupsQPLSource.enum").JEWEL_THREADLIST_QP,v=o("useLabyrinthLogging").useLabyrinthLoggingFlow(),S=v.startFlow,R=p(!1),L=m(r("MWJewelPopoverDialogContext.react")),E=L.setIsOpenForDialog,k=o("MWEBVirtualDevicesContext.react").useMWEBVirtualDevices(),I=k.virtualDeviceInfo,T=I.vestaClientID!=null,D=I.offlineDevicesCount>0,x=I.doesUserHaveOtcEligibleDevices,$=!T&&x,P;n[1]!==y||n[2]!==x||n[3]!==d||n[4]!==T||n[5]!==b||n[6]!==S?(P=function(t){o("MWEncryptedBackupsRetrieveQplLoggingAnnotations").encryptedBackupsRetrieveQplLoggingAnnotations({db:y,onFetch:function(n){var e=n.ebsmWiped,a=n.firstUpsellTime,i=n.hasEbKeysLocally,l=n.hasEBSM,s=n.hasPDB,u=n.hasUserRestoredBefore,c=n.hasUserRestoredBeforeTemp;S({additionalAnnotations:{eb_session_identifier:a,ebsm_wiped:e,has_eb_keys_locally:i,has_ebsm:l,has_pdb:s,has_user_restored_before:u,has_user_restored_before_temp:c,is_otc_eligible:x.toString(),is_pin_locked_blocked:d.toString(),is_pin_set:T.toString(),restore_upsell_first_impression_time:a},event:o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,source:b}),r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,t),R.current===!1&&(R.current=!0,r("promiseDone")(_.load(),function(e){return e(i)}))}})},n[1]=y,n[2]=x,n[3]=d,n[4]=T,n[5]=b,n[6]=S,n[7]=P):P=n[7];var N=P,M;n[8]!==C||n[9]!==N?(M={onVisible:function(){var e=C?"VERIFY_DEVICE_INBOX_QP_THREAD_LIST_IMPRESSION":"VERIFY_DEVICE_QP_THREAD_LIST_IMPRESSION";N(e)}},n[8]=C,n[9]=N,n[10]=M):M=n[10];var w=r("useVisibilityObserver")(M),A;n[11]!==C||n[12]!==l||n[13]!==E||n[14]!==N?(A=function(){var e=C?"USER_CLICKED_INBOX_THREAD_LIST_VERIFY_DEVICE":"USER_CLICKED_FB_THREAD_LIST_VERIFY_DEVICE";N(e),E(!0),l()},n[11]=C,n[12]=l,n[13]=E,n[14]=N,n[15]=A):A=n[15];var F=A,O,B;if(n[16]!==C||n[17]!==l||n[18]!==u||n[19]!==N?(O=function(){var e=C?"USER_CLOSED_INBOX_THREAD_LIST_VERIFY_DEVICE_NUX":"USER_CLOSED_FB_THREAD_LIST_VERIFY_DEVICE_NUX";N(e),o("MWChatEncryptedBackupsLogging").cancelFlow({cancelEndPoint:"thread_list_nux",event:o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent}),B()},B=function(){u(),l()},n[16]=C,n[17]=l,n[18]=u,n[19]=N,n[20]=O,n[21]=B):(O=n[20],B=n[21]),!T&&!D&&!x)return a;var W;n[22]===Symbol.for("react.memo_cache_sentinel")?(W=s._(/*BTDS*/"Thi\u1ebfu l\u1ecbch s\u1eed chat"),n[22]=W):W=n[22];var q=W,U;n[23]!==x||n[24]!==d||n[25]!==T||n[26]!==$?(U=d&&x?s._(/*BTDS*/"Kh\u00f4i ph\u1ee5c ngay"):T?s._(/*BTDS*/"Nh\u1eadp m\u00e3 PIN"):$?s._(/*BTDS*/"Kh\u00f4i ph\u1ee5c ngay"):s._(/*BTDS*/"Nh\u1eadp m\u00e3 g\u1ed3m 40 k\u00fd t\u1ef1"),n[23]=x,n[24]=d,n[25]=T,n[26]=$,n[27]=U):U=n[27];var V;n[28]!==B||n[29]!==F||n[30]!==b||n[31]!==h?(V=function(){F(),h({onDismissUpsell:B,source:b})},n[28]=B,n[29]=F,n[30]=b,n[31]=h,n[32]=V):V=n[32];var H;n[33]!==U||n[34]!==V?(H={label:U,onPress:V,testid:"mw-encrypted-backups-in-thread-verify-device-nux-verify-now-button"},n[33]=U,n[34]=V,n[35]=H):H=n[35];var G;n[36]!==x||n[37]!==d||n[38]!==T||n[39]!==$?(G=d&&x?s._(/*BTDS*/"G\u1eedi m\u00e3 d\u00f9ng m\u1ed9t l\u1ea7n \u0111\u1ec3 kh\u00f4i ph\u1ee5c l\u1ecbch s\u1eed chat"):T?s._(/*BTDS*/"H\u00e3y nh\u1eadp m\u00e3 PIN \u0111\u1ec3 xem tin nh\u1eafn ch\u01b0a t\u1ea3i \u0111\u01b0\u1ee3c tr\u00ean thi\u1ebft b\u1ecb n\u00e0y."):$?s._(/*BTDS*/"G\u1eedi m\u00e3 d\u00f9ng m\u1ed9t l\u1ea7n \u0111\u1ec3 kh\u00f4i ph\u1ee5c l\u1ecbch s\u1eed chat"):s._(/*BTDS*/"H\u00e3y nh\u1eadp m\u00e3 g\u1ed3m 40 k\u00fd t\u1ef1 \u0111\u1ec3 xem tin nh\u1eafn ch\u01b0a t\u1ea3i \u0111\u01b0\u1ee3c tr\u00ean thi\u1ebft b\u1ecb n\u00e0y."),n[36]=x,n[37]=d,n[38]=T,n[39]=$,n[40]=G):G=n[40];var z;n[41]===Symbol.for("react.memo_cache_sentinel")?(z={props:{src:r("getMWEBRestoreQPCautionCircleProperties")()},type:"image"},n[41]=z):z=n[41];var j;return n[42]!==O||n[43]!==w||n[44]!==H||n[45]!==G?(j=c.jsx(r("MWXQPCard.react"),{addOnPrimary:H,body:G,headline:q,icon:z,onClose:O,ref:w}),n[42]=O,n[43]=w,n[44]=H,n[45]=G,n[46]=j):j=n[46],j}l.default=f}),226);
__d("MWEncryptedBackupsThreadListRestoreQPWrapper.react",["CometRelay","EncryptedBackupsSupportedPlatformUtils","MWEBEntrypointsKillswitch.enum","MWEBRestoreQPWithPin.react","MWEBVestaUserInfoContext.react","MWEBVirtualDevicesContext.react","MWEncryptedBackupsDeferLocalStorageUpsell","MWEncryptedBackupsThreadListPersistentBanner.react","MWEncryptedBackupsThreadListQPWrapper.react","MWEncryptedBackupsThreadListRestoreQPWrapper_query.graphql","MWEncryptedBackupsThreadListRestoreQPWrapper_viewer.graphql","MWEncryptedBackupsVerifyDeviceNux.react","react","react-compiler-runtime","useHasRestoreInterstitialSoftblockBeenDismissed","useMWEBBackupState","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=c||(c=o("react"));function m(t){var a=o("react-compiler-runtime").c(32),i=t.backupState,l=t.children,s=t.currentSupportedPlatform,c=t.fragmentKey,m=t.setHasDismissedQp,p=t.setHasDismissedQpWithPin,_=o("CometRelay").useFragment(e!==void 0?e:e=n("MWEncryptedBackupsThreadListRestoreQPWrapper_viewer.graphql"),c),f=(u||(u=r("useReStore")))(),g=o("MWEBVirtualDevicesContext.react").useMWEBVirtualDevices(),h=g.virtualDeviceInfo,y=s===o("EncryptedBackupsSupportedPlatformUtils").EncryptedBackupsSupportedPlatform.FACEBOOK_DOT_COM,C=h.doesUserHaveOtcEligibleDevices,b=o("MWEBVestaUserInfoContext.react").useMWEBIsCooldownOrLockOutState(),v;a[0]!==i||a[1]!==b?(v={backupState:i,isCooldownOrLockOutState:b},a[0]=i,a[1]=b,a[2]=v):v=a[2];var S=r("useHasRestoreInterstitialSoftblockBeenDismissed")(v);if(!C&&b&&S)return null;if(b&&S){var R;a[3]!==m?(R=function(){m(!0)},a[3]=m,a[4]=R):R=a[4];var L;a[5]!==f?(L=function(){return o("MWEncryptedBackupsDeferLocalStorageUpsell").updateUpsellEntry({db:f,upsellType:o("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.QP_JEWEL})},a[5]=f,a[6]=L):L=a[6];var E;return a[7]!==l||a[8]!==s||a[9]!==R||a[10]!==L?(E=d.jsx(r("MWEncryptedBackupsVerifyDeviceNux.react"),{children:l,currentSupportedPlatform:s,setClosed:R,setDismissed:L}),a[7]=l,a[8]=s,a[9]=R,a[10]=L,a[11]=E):E=a[11],E}else if(y&&h.vestaClientID!=null&&r("MWEBRestoreQPWithPin.react")){var k;a[12]!==p?(k=function(){p(!0)},a[12]=p,a[13]=k):k=a[13];var I;a[14]!==f?(I=function(){return o("MWEncryptedBackupsDeferLocalStorageUpsell").updateUpsellEntry({db:f,upsellType:o("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.QP_WITH_PIN_JEWEL})},a[14]=f,a[15]=I):I=a[15];var T;return a[16]!==s||a[17]!==_||a[18]!==k||a[19]!==I||a[20]!==h.doesUserHaveOtcEligibleDevices||a[21]!==h.vestaClientID?(T=d.jsx(r("MWEBRestoreQPWithPin.react"),{clientID:h.vestaClientID,currentSupportedPlatform:s,doesUserHaveOtcEligibleDevices:h.doesUserHaveOtcEligibleDevices,fragmentKey:_,setClosed:k,setDismissed:I}),a[16]=s,a[17]=_,a[18]=k,a[19]=I,a[20]=h.doesUserHaveOtcEligibleDevices,a[21]=h.vestaClientID,a[22]=T):T=a[22],T}else{var D;a[23]!==m?(D=function(){m(!0)},a[23]=m,a[24]=D):D=a[24];var x;a[25]!==f?(x=function(){return o("MWEncryptedBackupsDeferLocalStorageUpsell").updateUpsellEntry({db:f,upsellType:o("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.QP_JEWEL})},a[25]=f,a[26]=x):x=a[26];var $;return a[27]!==l||a[28]!==s||a[29]!==D||a[30]!==x?($=d.jsx(r("MWEncryptedBackupsVerifyDeviceNux.react"),{children:l,currentSupportedPlatform:s,setClosed:D,setDismissed:x}),a[27]=l,a[28]=s,a[29]=D,a[30]=x,a[31]=$):$=a[31],$}}function p(e){var t=o("react-compiler-runtime").c(12),a=e.children,i=e.currentSupportedPlatform,l=e.fragmentKey,c=e.hasDismissedQps,p=e.setHasDismissedBanner,_=e.setHasDismissedQp,f=e.setHasDismissedQpWithPin,g=e.trigger,h=o("CometRelay").useFragment(s!==void 0?s:s=n("MWEncryptedBackupsThreadListRestoreQPWrapper_query.graphql"),l),y=(u||(u=r("useReStore")))(),C;t[0]===Symbol.for("react.memo_cache_sentinel")?(C={entrypoint:r("MWEBEntrypointsKillswitch.enum").INBOX_THREADLIST},t[0]=C):C=t[0];var b=r("useMWEBBackupState")(C),v;return t[1]!==b||t[2]!==a||t[3]!==i||t[4]!==(h==null?void 0:h.viewer)||t[5]!==y||t[6]!==c||t[7]!==p||t[8]!==_||t[9]!==f||t[10]!==g?(v=c?d.jsx(o("MWEncryptedBackupsThreadListQPWrapper.react").MWEncryptedBackupsThreadListQPWrapper,{trigger:g,children:d.jsx(r("MWEncryptedBackupsThreadListPersistentBanner.react"),{onDismissUpsell:function(){p(!0),o("MWEncryptedBackupsDeferLocalStorageUpsell").updateUpsellEntry({db:y,upsellType:o("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.PERSISTENT_BANNER_JEWEL})}})}):d.jsx(o("MWEncryptedBackupsThreadListQPWrapper.react").MWEncryptedBackupsThreadListQPWrapper,{trigger:g,children:d.jsx(m,{backupState:b,children:a,currentSupportedPlatform:i,fragmentKey:h==null?void 0:h.viewer,setHasDismissedQp:_,setHasDismissedQpWithPin:f})}),t[1]=b,t[2]=a,t[3]=i,t[4]=h==null?void 0:h.viewer,t[5]=y,t[6]=c,t[7]=p,t[8]=_,t[9]=f,t[10]=g,t[11]=v):v=t[11],v}l.default=p}),98);
__d("VestaServerGraphQLLoginProviderBeginLoginMutation_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9747954008656745"}),null);
__d("VestaServerGraphQLLoginProviderBeginLoginMutation.graphql",["VestaServerGraphQLLoginProviderBeginLoginMutation_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{alias:null,args:[{kind:"Variable",name:"begin_login_request",variableName:"input"}],concreteType:"VestaBeginLoginResponse",kind:"LinkedField",name:"fbid_based_auth_layer_vesta_begin_login",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_opaque_l2",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_opaque_l2_sig",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"VestaServerGraphQLLoginProviderBeginLoginMutation",selections:t,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"VestaServerGraphQLLoginProviderBeginLoginMutation",selections:t},params:{id:n("VestaServerGraphQLLoginProviderBeginLoginMutation_facebookRelayOperation"),metadata:{},name:"VestaServerGraphQLLoginProviderBeginLoginMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("VestaServerGraphQLLoginProviderFinishLoginMutation_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9611648865601020"}),null);
__d("VestaServerGraphQLLoginProviderFinishLoginMutation.graphql",["VestaServerGraphQLLoginProviderFinishLoginMutation_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{alias:null,args:[{kind:"Variable",name:"finish_login_request",variableName:"input"}],concreteType:"VestaFinishLoginResponse",kind:"LinkedField",name:"fbid_based_auth_layer_vesta_finish_login",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_login_payload",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"login_success",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"attempts_remaining",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"VestaServerGraphQLLoginProviderFinishLoginMutation",selections:t,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"VestaServerGraphQLLoginProviderFinishLoginMutation",selections:t},params:{id:n("VestaServerGraphQLLoginProviderFinishLoginMutation_facebookRelayOperation"),metadata:{},name:"VestaServerGraphQLLoginProviderFinishLoginMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("VestaServerGraphQLLoginProviderInitQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9285801411531503"}),null);
__d("VestaServerGraphQLLoginProviderInitQuery.graphql",["VestaServerGraphQLLoginProviderInitQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"request"}],t=[{alias:null,args:[{kind:"Variable",name:"vesta_init_request",variableName:"request"}],concreteType:"VestaInitIqResponse",kind:"LinkedField",name:"fbid_based_auth_layer_vesta_login_init",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_island_rsa_pub",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_island_rsa_pub_signature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_opaque_pub",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_opaque_pub_signature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_island_ed25519_pub",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_island_ed25519_pub_signature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_registered",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"attempts_remaining",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"VestaServerGraphQLLoginProviderInitQuery",selections:t,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"VestaServerGraphQLLoginProviderInitQuery",selections:t},params:{id:n("VestaServerGraphQLLoginProviderInitQuery_facebookRelayOperation"),metadata:{},name:"VestaServerGraphQLLoginProviderInitQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("VestaServerGraphQLLoginProvider",["E2EEBackupUtil","RelayHooks","RelayModern","VestaServerGraphQLLoginProviderBeginLoginMutation.graphql","VestaServerGraphQLLoginProviderFinishLoginMutation.graphql","VestaServerGraphQLLoginProviderInitQuery.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;async function c(t,r){var a=r.environment,i=await o("RelayHooks").fetchQuery(a,e!==void 0?e:e=n("VestaServerGraphQLLoginProviderInitQuery.graphql"),{request:{fbid:t.clientId,product_use_case:t.productUseCase,vesta_client_api_version:6}}).toPromise(),l=i==null?void 0:i.fbid_based_auth_layer_vesta_login_init,s=l==null?void 0:l.base64url_encoded_island_rsa_pub,u=l==null?void 0:l.base64url_encoded_island_rsa_pub_signature,c=l==null?void 0:l.base64url_encoded_opaque_pub,d=l==null?void 0:l.base64url_encoded_opaque_pub_signature,m=l==null?void 0:l.base64url_encoded_island_ed25519_pub,p=l==null?void 0:l.base64url_encoded_island_ed25519_pub_signature,_=l==null?void 0:l.is_registered,f=l==null?void 0:l.attempts_remaining;if(s!=null&&u!=null&&c!=null&&d!=null&&m!=null&&p!=null&&_!=null){var g;return{islandRsaPub:(g=o("E2EEBackupUtil")).decodeBase64Url(s),islandRsaPubSig:g.decodeBase64Url(u),opaquePub:g.decodeBase64Url(c),opaquePubSig:g.decodeBase64Url(d),islandEd25519Pub:g.decodeBase64Url(m),islandEd25519PubSig:g.decodeBase64Url(p),isRegistered:_,loginAttemptsRemaining:f}}throw new Error("GraphQL Response is Null")}function d(e,t){var r=t.environment,a=s!==void 0?s:s=n("VestaServerGraphQLLoginProviderBeginLoginMutation.graphql"),i={input:{fbid:e.clientId,product_use_case:e.productUseCase,base64url_encoded_opaque_l1:o("E2EEBackupUtil").encodeBase64Url(e.opaqueL1)}};return new Promise(function(e,t){o("RelayModern").commitMutation(r,{mutation:a,variables:i,onCompleted:function(r){var n=r.fbid_based_auth_layer_vesta_begin_login,a=n==null?void 0:n.base64url_encoded_opaque_l2,i=n==null?void 0:n.base64url_encoded_opaque_l2_sig;if(a!=null&&i!=null){e({opaqueL2:o("E2EEBackupUtil").decodeBase64Url(a),opaqueL2Sig:o("E2EEBackupUtil").decodeBase64Url(i)});return}t(new Error("GraphQL Response is Null"))},onError:function(n){t(n)}})})}function m(e,t){var r=t.environment,a=t.updater;return new Promise(function(t,i){o("RelayModern").commitMutation(r,{mutation:u!==void 0?u:u=n("VestaServerGraphQLLoginProviderFinishLoginMutation.graphql"),variables:{input:{fbid:e.clientId,product_use_case:e.productUseCase,base64url_encoded_opaque_l3:o("E2EEBackupUtil").encodeBase64Url(e.opaqueL3)}},onCompleted:function(n){var e=n.fbid_based_auth_layer_vesta_finish_login,r=e==null?void 0:e.base64url_encoded_login_payload,a=e==null?void 0:e.login_success,l=e==null?void 0:e.attempts_remaining;if(a!=null){t({loginSuccess:a,loginPayload:r==null?r:o("E2EEBackupUtil").decodeBase64Url(r),attemptsRemaining:l});return}i(new Error("GraphQL Response is Null"))},onError:function(t){i(t)},updater:a})})}l.initLogin=c,l.beginLogin=d,l.finishLogin=m}),98);
__d("mwEBAddDevice",["EBSMAPI","MAWCurrentUser","MWChatEncryptedBackupsQPLEvents","MWEncryptedBackupsInitializeRestoreDeferred","QPLUserFlow","isInstamadilloEB"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.environment,n=e.onFailure,a=e.onInvalidRecoveryCode,i=e.onSuccess,l=e.recoveryCode,s=e.storage;return r("EBSMAPI").addDeviceWithRecoveryCode({environment:t,recoveryCode:l,userId:o("MAWCurrentUser").getID()}).then(function(e){e.success?(i(),r("isInstamadilloEB")()?r("QPLUserFlow").endSuccess(o("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent):o("MWEncryptedBackupsInitializeRestoreDeferred").encryptedBackupsInitializeRestoreDeferred({db:s,onFailure:function(){},onSuccess:function(){}})):e.error==="INVALID_RECOVERY_CODE"?a():n(e.error)})}l.EBAddDevice=e}),98);
__d("vestaBackupSecretRestore",["requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("E2EEBackupSecretRestoreModule").__setRef("vestaBackupSecretRestore"),s=r("requireDeferred")("VestaServerGraphQLLoginProvider").__setRef("vestaBackupSecretRestore");async function u(t){var n=t.input,r=t.environment,o=await Promise.all([s.load(),e.load()]),a=o[0],i=a.beginLogin,l=a.finishLogin,u=a.initLogin,c=o[1].restoreBackupSecret;return c({beginLogin:i,finishLogin:l,initLogin:u},n,{environment:r})}l.default=u}),98);
__d("mwEBGetPINSecretFromVesta",["CometRelay","E2EEBackupCommon","FBLogger","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsSettingsDialogQuery.graphql","MWEBODSEntityKey.enum","MWEBODSEntityName.enum","QPLUserFlow","getErrorSafe","promiseDone","vestaBackupSecretRestore"],(function(t,n,r,o,a,i,l){"use strict";async function e(e){var t=e.addDevice,n=e.clientID,a=e.environment,i=e.getSourceFromContext,l=e.onSubmitPin,s=e.onSubmitPinFailure,u=e.onVestaSecretFetch,c=e.pinCode,d=e.productUseCase,m=e.setIsInProgress,p=e.setIsPinCodeIncorrect,_=e.setIsVestaError,f=e.startFlow;m(!0),l==null||l();var g=i();r("QPLUserFlow").addAnnotations(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,{string:{restore_type:"pin_code",source:g}});var h=new TextDecoder,y;f({additionalAnnotations:{device_type:"HSM"},event:o("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent,odsEntityName:r("MWEBODSEntityName.enum").MW_EB_PIN_RESTORE_AUTH,source:g});try{r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent,"vesta_login_begin"),r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"PIN_CODE_RESTORE_SUBMIT"),y=h.decode(await r("vestaBackupSecretRestore")({environment:a,input:{clientId:n,productUseCase:d,vestaAccountPin:c}})),r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent,"vesta_login_success")}catch(e){var C=r("getErrorSafe")(e),b=typeof e=="object"&&e!=null&&"errorType"in e&&typeof e.errorType=="string"?e.errorType:void 0;if(s==null||s(),r("promiseDone")(o("CometRelay").fetchQuery(a,r("MWChatEncryptedBackupsSettingsDialogQuery.graphql"),{}).toPromise()),b===o("E2EEBackupCommon").BackupErrorType.INVALID_PASSWORD)m(!1),p(!0),o("MWChatEncryptedBackupsLogging").endFailure({errorName:"incorrect_pin_code",event:o("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent,odsEntityKey:r("MWEBODSEntityKey.enum").INCORRECT_PIN_CODE,odsEntityName:r("MWEBODSEntityName.enum").MW_EB_PIN_RESTORE_AUTH}),r("QPLUserFlow").markError(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"incorrect_pin_code");else{o("MWChatEncryptedBackupsLogging").endFailure({annotations:{string:{errorMessage:C.message,errorType:b}},errorName:"vesta_login_failure",event:o("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent,odsEntityName:r("MWEBODSEntityName.enum").MW_EB_PIN_RESTORE_AUTH}),r("QPLUserFlow").markError(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"pin_code_error"),m(!1),_(!0);var v="Error when restoring using PIN: "+C.message;r("FBLogger")("wmi_eb").mustfix(v)}throw e}y!=null&&(u==null||u(),r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent,"add_device_begin"),t(y,c))}l.default=e}),98);
__d("updateUpsellsStateInRelayStore",["CometRelay","FBLogger"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.environment,n=e.updateValue;o("CometRelay").commitLocalUpdate(t,function(e){var t=e.getRoot().getLinkedRecord("viewer");if(t==null){r("FBLogger")("wmi_eb").mustfix("[labyrinth][upsells] A viewer record does not exist when updating upsell state.");return}t.setValue(n,"is_eb_restore_upsells_dismissed")})}l.default=e}),98);